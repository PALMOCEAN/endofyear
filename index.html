<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="–û—Ä–≥–∞–Ω–∏–∑—É–µ–º –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–µ –≤—ã–ø—É—Å–∫–Ω—ã–µ –¥–ª—è 4 –∫–ª–∞—Å—Å–∞. –î–≤–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞ –ø—Ä–∏—Ä–æ–¥–µ: —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π —Ç–∏–º–±–∏–ª–¥–∏–Ω–≥ –∏ –∫–≤–µ—Å—Ç-–∏–≥—Ä–∞. 500+ –¥–æ–≤–æ–ª—å–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤.">
  <meta name="keywords" content="–≤—ã–ø—É—Å–∫–Ω–æ–π 4 –∫–ª–∞—Å—Å, –≤—ã–ø—É—Å–∫–Ω–æ–π –Ω–∞ –ø—Ä–∏—Ä–æ–¥–µ, –¥–µ—Ç—Å–∫–∏–π —Ç–∏–º–±–∏–ª–¥–∏–Ω–≥, –∫–≤–µ—Å—Ç –¥–ª—è –¥–µ—Ç–µ–π">
  <title>–í—ã–ø—É—Å–∫–Ω–æ–π –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–π —à–∫–æ–ª—ã –Ω–∞ –ø—Ä–∏—Ä–æ–¥–µ | –í—ã–∑–æ–≤ –≥–µ—Ä–æ–µ–≤ –∏ –¢–∞–π–Ω—ã –î—Ä–µ–≤–Ω–∏—Ö</title>
  
  <!-- Resource Hints for Performance -->
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">
  <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
  
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer">
  
  <!-- Open Graph -->
  <meta property="og:title" content="–í—ã–ø—É—Å–∫–Ω–æ–π –Ω–∞ –ø—Ä–∏—Ä–æ–¥–µ –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–π —à–∫–æ–ª—ã">
  <meta property="og:description" content="–í—ã–∑–æ–≤ –≥–µ—Ä–æ–µ–≤ –∏ –¢–∞–π–Ω—ã –î—Ä–µ–≤–Ω–∏—Ö - –¥–≤–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –Ω–µ–∑–∞–±—ã–≤–∞–µ–º–æ–≥–æ –≤—ã–ø—É—Å–∫–Ω–æ–≥–æ">
  <meta property="og:type" content="website">
  
  <!-- Critical CSS - Inline for faster initial render -->
  <style>
    /* Critical CSS - Above the fold styles */
    *{box-sizing:border-box;margin:0;padding:0;font-family:'Comfortaa',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif !important}*::before,*::after{box-sizing:border-box}html{-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body{margin:0;padding:0;padding-top:70px;line-height:1.5;font-size:16px;color:#2C3E50;background-color:#F7F9FC}@media (min-width:768px){body{padding-top:72px}}h1,h2,h3,h4,h5,h6{font-family:'Comfortaa',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif !important;font-weight:700}.logo,.logo *{font-family:'Philosopher','Comfortaa',-apple-system,BlinkMacSystemFont,sans-serif !important}h1{font-size:32px;line-height:40px}@media (min-width:1024px){h1{font-size:48px;line-height:56px}}.container{width:100%;max-width:1200px;margin:0 auto;padding:0 16px}@media (min-width:768px){.container{padding:0 32px}}.header{background:rgba(255,255,255,0.98);backdrop-filter:blur(20px);padding:16px 0;position:fixed;top:0;left:0;right:0;z-index:100}.header-content{display:flex;justify-content:space-between;align-items:center;gap:16px}.logo{font-size:18px;font-weight:700;color:#FF6B35;text-align:center}@media (min-width:768px){.logo{font-size:20px}}.hero{position:relative;min-height:500px;display:flex;align-items:center;background:linear-gradient(135deg,rgba(255,107,53,.9) 0%,rgba(78,205,196,.9) 100%);color:#fff;overflow:hidden}.hero::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background-image:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600"><rect fill="%23FF6B35" width="1200" height="600"/><circle fill="%234ECDC4" opacity="0.3" cx="200" cy="150" r="100"/><circle fill="%23FFE66D" opacity="0.3" cx="900" cy="400" r="150"/><circle fill="%234ECDC4" opacity="0.2" cx="600" cy="300" r="80"/></svg>');background-size:cover;background-position:center;z-index:0}.hero-content{position:relative;z-index:2;text-align:center}.btn{display:inline-block;padding:16px 32px;border-radius:8px;font-weight:600;text-align:center;transition:all .2s ease-out;min-height:48px;line-height:1.2;border:none;cursor:pointer;font-size:16px;text-decoration:none}.btn-primary{background-color:#FF6B35;color:#fff;box-shadow:0 4px 20px rgba(0,0,0,.08)}
  </style>
  
  <!-- Preload critical fonts with font-display: swap -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  

  
  <!-- Load fonts synchronously to prevent fallback font flash -->
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&family=Philosopher:wght@400;700&display=swap" rel="stylesheet">
  
  <!-- Styles - Load synchronously to prevent font fallback -->
  <link rel="stylesheet" href="styles/reset.css?v=15">
  <link rel="stylesheet" href="styles/global.css?v=15">
</head>
<body>

  


  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <div class="logo-line">
            <span class="logo-primary">–ö–õ–ê–°–°</span><span class="logo-secondary">–ù–´–ô</span>
          </div>
          <div class="logo-line">
            <span class="logo-primary">–ü–†–ê–ó–î–ù–ò–ö</span>
          </div>
        </div>
        <div class="header-contact">
          <a href="tel:+79991234567" class="phone-link" onclick="trackPhoneClick()">
            <span class="css-phone phone-icon"></span>
            <span class="phone-number">+7 (999) 300-38-51</span>
          </a>
          <div class="header-messengers">
            <a href="https://wa.me/79991234567?text=–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!%20–•–æ—á—É%20—É–∑–Ω–∞—Ç—å%20–æ%20–≤—ã–ø—É—Å–∫–Ω–æ–º%20–¥–ª—è%204%20–∫–ª–∞—Å—Å–∞" 
               class="messenger-link messenger-whatsapp" 
               target="_blank" 
               rel="noopener noreferrer"
               onclick="trackMessengerClick('whatsapp')"
               aria-label="–ù–∞–ø–∏—Å–∞—Ç—å –≤ WhatsApp">
              <span class="css-whatsapp messenger-icon"></span>
            </a>
            <a href="https://t.me/+79991234567?text=–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!%20–•–æ—á—É%20—É–∑–Ω–∞—Ç—å%20–æ%20–≤—ã–ø—É—Å–∫–Ω–æ–º%20–¥–ª—è%204%20–∫–ª–∞—Å—Å–∞" 
               class="messenger-link messenger-telegram" 
               target="_blank" 
               rel="noopener noreferrer"
               onclick="trackMessengerClick('telegram')"
               aria-label="–ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram">
              <span class="css-telegram messenger-icon"></span>
            </a>
          </div>
          <button class="btn btn-primary btn-sm" onclick="scrollToForm()">–ó–∞–∫–∞–∑–∞—Ç—å –∑–≤–æ–Ω–æ–∫</button>
        </div>
      </div>
    </div>
  </header>

  <!-- Hero Section -->
  <!-- Add class "with-image" when hero background images are ready -->
  <!-- Place optimized images in /images/ folder:
       - hero-background-mobile.jpg (max 800px width, WebP format)
       - hero-background-tablet.jpg (max 1200px width, WebP format)
       - hero-background.jpg (max 1920px width, WebP format)
  -->
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <h1>–ü–æ–¥–∞—Ä–∏—Ç–µ –≤—ã–ø—É—Å–∫–Ω–æ–π,<br>–∫–æ—Ç–æ—Ä—ã–π –¥–µ—Ç–∏ –∑–∞–ø–æ–º–Ω—è—Ç!</h1>
        <p class="hero-subtitle">–ì–æ—Ç–æ–≤—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ–¥ –∫–ª—é—á –≤ –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–µ: <br>–≤–µ–¥—É—â–∏–µ, –∞–Ω–∏–º–∞—Ç–æ—Ä—ã, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ, –ø—Ä–∏–∑—ã –∏ –º–æ—Ä–µ —ç–º–æ—Ü–∏–π!</p>
        <div class="hero-cta">
          <button class="btn btn-primary btn-lg" onclick="scrollToPrograms()">–í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É</button>
          <button class="btn btn-secondary btn-lg" onclick="scrollToForm()">–°–≤–æ–±–æ–¥–Ω—ã–µ –¥–∞—Ç—ã</button>
        </div>

      </div>
    </div>
  </section>

  <!-- Problem-Solution Section -->
  <section id="problem-solution">
    <div class="container">
      <h2 class="text-center mb-2xl">–ó–∞–±—É–¥—å—Ç–µ –æ —Å—Ç—Ä–µ—Å—Å–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ ‚Äî –º—ã –≤—Å–µ —Å–¥–µ–ª–∞–µ–º –∑–∞ –≤–∞—Å</h2>
      <div class="programs-grid">
        <div class="card">
          <h3 class="mb-md">üòì –ó–Ω–∞–∫–æ–º–∞—è —Å–∏—Ç—É–∞—Ü–∏—è?</h3>
          <p style="line-height: 1.7;">–°–∫—É—á–Ω—ã–µ –≤—ã–ø—É—Å–∫–Ω—ã–µ –≤ –¥—É—à–Ω–æ–º –∞–∫—Ç–æ–≤–æ–º –∑–∞–ª–µ, –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–±—Ä–∞–Ω–∏—è, —Å–ø–æ—Ä—ã –æ –±—é–¥–∂–µ—Ç–µ, –ø–æ–∏—Å–∫ –∞–Ω–∏–º–∞—Ç–æ—Ä–æ–≤, –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è –æ –ø–æ–≥–æ–¥–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏...</p>
          <p style="margin-top: 16px; font-weight: 600; color: var(--color-error);">–ê –≤ –∏—Ç–æ–≥–µ ‚Äî —Å—Ç—Ä–µ—Å—Å –≤–º–µ—Å—Ç–æ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞</p>
        </div>
        <div class="card">
          <h3 class="mb-md">‚úÖ –ú—ã —Ä–µ—à–∞–µ–º –≤—Å–µ –∑–∞ –≤–∞—Å</h3>
          <p style="line-height: 1.7;">–ì–æ—Ç–æ–≤—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ–¥ –∫–ª—é—á, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏ –Ω–∞ –ø—Ä–∏—Ä–æ–¥–µ, –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞, —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ, –ø—Ä–∏–∑—ã –¥–ª—è –≤—Å–µ—Ö –¥–µ—Ç–µ–π</p>
          <p style="margin-top: 16px; font-weight: 600; color: var(--color-success);">–í–∞–º –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞—Å–ª–∞–∂–¥–∞—Ç—å—Å—è —Å—á–∞—Å—Ç—å–µ–º –¥–µ—Ç–µ–π</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Programs Showcase -->
  <section id="programs">
    <div class="container">
      <h2 class="text-center mb-md">–î–≤–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã ‚Äî –æ–¥–Ω–∞ —Ü–µ–ª—å: –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–µ —ç–º–æ—Ü–∏–∏</h2>
      <p class="text-center mb-xl" style="font-size: 20px; color: var(--color-text-light); max-width: 700px; margin-left: auto; margin-right: auto;">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥—Ö–æ–¥–∏—Ç –≤–∞—à–µ–º—É –∫–ª–∞—Å—Å—É. –û–±–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –Ω–∞ –ø—Ä–∏—Ä–æ–¥–µ —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –∞–Ω–∏–º–∞—Ç–æ—Ä–∞–º–∏</p>
      
      <div class="programs-grid" id="programsGrid">
        <!-- Programs will be loaded dynamically from JSON -->
      </div>
      
      <!-- Program comparison note -->
      <div class="program-comparison-note">
        <p>üí° <strong>–ù–µ –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å?</strong> –ü–æ–∑–≤–æ–Ω–∏—Ç–µ –Ω–∞–º, –∏ –º—ã –ø–æ–º–æ–∂–µ–º –ø–æ–¥–æ–±—Ä–∞—Ç—å –∏–¥–µ–∞–ª—å–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É –¥–ª—è –≤–∞—à–µ–≥–æ –∫–ª–∞—Å—Å–∞!</p>
      </div>
    </div>
  </section>

  <!-- How It Works -->
  <section id="how-it-works" style="background: white;">
    <div class="container">
      <h2 class="text-center mb-xl">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h2>
      <div class="programs-grid">
        <div class="card text-center">
          <h3 class="mb-sm">1Ô∏è‚É£ –ó–∞—è–≤–∫–∞</h3>
          <p>–û—Å—Ç–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É –Ω–∞ —Å–∞–π—Ç–µ –∏–ª–∏ –ø–æ–∑–≤–æ–Ω–∏—Ç–µ –Ω–∞–º</p>
        </div>
        <div class="card text-center">
          <h3 class="mb-sm">2Ô∏è‚É£ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</h3>
          <p>–û–±—Å—É–¥–∏–º –¥–µ—Ç–∞–ª–∏, –≤—ã–±–µ—Ä–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É –∏ –¥–∞—Ç—É</p>
        </div>
        <div class="card text-center">
          <h3 class="mb-sm">3Ô∏è‚É£ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞</h3>
          <p>–ú—ã –æ—Ä–≥–∞–Ω–∏–∑—É–µ–º –≤—Å–µ: –æ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –¥–æ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞</p>
        </div>
        <div class="card text-center">
          <h3 class="mb-sm">4Ô∏è‚É£ –ü—Ä–∞–∑–¥–Ω–∏–∫</h3>
          <p>–ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–º –≤—ã–ø—É—Å–∫–Ω—ã–º!</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Social Proof -->
  <section id="social-proof">
    <div class="container">
      <h2 class="text-center mb-xl">–ù–∞–º –¥–æ–≤–µ—Ä—è—é—Ç</h2>
      <div class="programs-grid text-center mb-xl">
        <div class="card">
          <h3 style="color: var(--color-primary); font-size: 48px;">5+</h3>
          <p>–ª–µ—Ç –Ω–∞ —Ä—ã–Ω–∫–µ</p>
        </div>
        <div class="card">
          <h3 style="color: var(--color-primary); font-size: 48px;">2000+</h3>
          <p>–ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π</p>
        </div>
        <div class="card">
          <h3 style="color: var(--color-primary); font-size: 48px;">50 000+</h3>
          <p>–¥–æ–≤–æ–ª—å–Ω—ã—Ö –¥–µ—Ç–µ–π</p>
        </div>
        <div class="card">
          <h3 style="color: var(--color-primary); font-size: 48px;">99%</h3>
          <p>—Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç –¥—Ä—É–∑—å—è–º</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Testimonials -->
  <section id="testimonials" style="background: white;">
    <div class="container">
      <h2 class="text-center mb-md">–û—Ç–∑—ã–≤—ã —Ä–æ–¥–∏—Ç–µ–ª–µ–π</h2>
      <p class="text-center mb-xl">–ß—Ç–æ –≥–æ–≤–æ—Ä—è—Ç –æ –Ω–∞—Å —Ç–µ, –∫—Ç–æ —É–∂–µ –ø—Ä–æ–≤–µ–ª –≤—ã–ø—É—Å–∫–Ω–æ–π —Å –Ω–∞–º–∏</p>
      
      <div class="testimonials-wrapper">
        <button class="carousel-nav carousel-nav-prev" onclick="navigateTestimonials(-1)" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–π –æ—Ç–∑—ã–≤">
          ‚Äπ
        </button>
        
        <div class="testimonials-carousel" id="testimonialsCarousel">
          <!-- Testimonials will be loaded dynamically from JSON -->
        </div>
        
        <button class="carousel-nav carousel-nav-next" onclick="navigateTestimonials(1)" aria-label="–°–ª–µ–¥—É—é—â–∏–π –æ—Ç–∑—ã–≤">
          ‚Ä∫
        </button>
      </div>
      
      <div class="carousel-dots" id="testimonialsDots">
        <!-- Dots will be generated dynamically -->
      </div>
    </div>
  </section>

  <!-- Photo Gallery -->
  <!-- 
    For production: Replace placeholder images in data/gallery.json with real photos
    Recommended image optimization:
    - Thumbnails: 400x400px, WebP format, quality 80
    - Full size: 1200x1200px max, WebP format, quality 85
    - Use responsive images with srcset for different screen sizes
    - Store images in /images/gallery/ folder
  -->
  <section id="gallery">
    <div class="container">
      <h2 class="text-center mb-md">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å –Ω–∞—à–∏—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π</h2>
      <p class="text-center mb-xl">–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫ –ø—Ä–æ—Ö–æ–¥—è—Ç –Ω–∞—à–∏ –≤—ã–ø—É—Å–∫–Ω—ã–µ</p>
      
      <!-- Gallery Filter -->
      <div class="gallery-filter">
        <button class="filter-btn active" data-filter="all" onclick="filterGallery('all')">
          –í—Å–µ —Ñ–æ—Ç–æ
        </button>
        <button class="filter-btn" data-filter="heroes" onclick="filterGallery('heroes')">
          –í—ã–∑–æ–≤ –≥–µ—Ä–æ–µ–≤
        </button>
        <button class="filter-btn" data-filter="ancients" onclick="filterGallery('ancients')">
          –¢–∞–π–Ω—ã –î—Ä–µ–≤–Ω–∏—Ö
        </button>
      </div>
      
      <div class="gallery-grid" id="galleryGrid">
        <!-- Gallery items will be loaded dynamically -->
      </div>
    </div>
  </section>

  <!-- Lightbox Modal -->
  <div class="lightbox" id="lightbox" onclick="closeLightbox(event)">
    <button class="lightbox-close" onclick="closeLightbox(event)" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
    <button class="lightbox-nav lightbox-prev" onclick="navigateLightbox(-1)" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ —Ñ–æ—Ç–æ">‚Äπ</button>
    <button class="lightbox-nav lightbox-next" onclick="navigateLightbox(1)" aria-label="–°–ª–µ–¥—É—é—â–µ–µ —Ñ–æ—Ç–æ">‚Ä∫</button>
    <div class="lightbox-content">
      <img id="lightboxImage" src="" alt="" loading="lazy">
      <div class="lightbox-caption" id="lightboxCaption"></div>
    </div>
  </div>

  <!-- Pricing Details -->
  <section id="pricing" style="background: white;">
    <div class="container">
      <h2 class="text-center mb-md">–ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ —Å—Ç–æ–∏–º–æ—Å—Ç—å</h2>
      <p class="text-center mb-xl">–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∫–∞–∂–¥–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ</p>
      
      <!-- Program tabs -->
      <div class="pricing-tabs" style="display: flex; justify-content: center; gap: 16px; margin-bottom: 32px; flex-wrap: wrap;">
        <button class="btn btn-outline active" data-program="heroes" onclick="showPricingDetails('heroes')">
          –í—ã–∑–æ–≤ –ì–µ—Ä–æ–µ–≤
        </button>
        <button class="btn btn-outline" data-program="ancients" onclick="showPricingDetails('ancients')">
          –¢–∞–π–Ω—ã –î—Ä–µ–≤–Ω–∏—Ö
        </button>
      </div>
      
      <div id="pricingDetails">
        <!-- Pricing details will be loaded dynamically -->
      </div>
      
      <div class="card mt-xl" style="background: var(--color-light);">
        <h3 class="mb-md text-center">üõ°Ô∏è –ù–∞—à–∏ –≥–∞—Ä–∞–Ω—Ç–∏–∏</h3>
        <div class="programs-grid">
          <div>
            <p><strong>–í–æ–∑–≤—Ä–∞—Ç 100%</strong> –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –∑–∞ 14 –¥–Ω–µ–π</p>
          </div>
          <div>
            <p><strong>–°—Ç—Ä–∞—Ö–æ–≤–∫–∞ –æ—Ç –Ω–µ–ø–æ–≥–æ–¥—ã</strong> - –ø–µ—Ä–µ–Ω–æ—Å –¥–∞—Ç—ã –±–µ—Å–ø–ª–∞—Ç–Ω–æ</p>
          </div>
          <div>
            <p><strong>–î–æ–≥–æ–≤–æ—Ä –∏ —á–µ–∫</strong> - —Ä–∞–±–æ—Ç–∞–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ</p>
          </div>
          <div>
            <p><strong>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</strong> - –≤—Å–µ –∞–Ω–∏–º–∞—Ç–æ—Ä—ã —Å –º–µ–¥. –∫–Ω–∏–∂–∫–∞–º–∏</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq">
    <div class="container">
      <h2 class="text-center mb-md">–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h2>
      <p class="text-center mb-xl">–û—Ç–≤–µ—Ç—ã –Ω–∞ —Å–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã —Ä–æ–¥–∏—Ç–µ–ª–µ–π</p>
      
      <!-- FAQ Category Filter -->
      <div class="faq-filter">
        <button class="faq-filter-btn active" data-category="all" onclick="filterFaq('all')">
          –í—Å–µ –≤–æ–ø—Ä–æ—Å—ã
        </button>
        <button class="faq-filter-btn" data-category="organization" onclick="filterFaq('organization')">
          –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
        </button>
        <button class="faq-filter-btn" data-category="safety" onclick="filterFaq('safety')">
          –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
        </button>
        <button class="faq-filter-btn" data-category="payment" onclick="filterFaq('payment')">
          –û–ø–ª–∞—Ç–∞
        </button>
        <button class="faq-filter-btn" data-category="weather" onclick="filterFaq('weather')">
          –ü–æ–≥–æ–¥–∞
        </button>
      </div>
      
      <div class="faq-list" id="faqList">
        <!-- FAQ items will be loaded dynamically from JSON -->
      </div>
      
      <div class="text-center mt-xl">
        <p class="mb-md">–ù–µ –Ω–∞—à–ª–∏ –æ—Ç–≤–µ—Ç –Ω–∞ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å?</p>
        <button class="btn btn-outline" onclick="scrollToForm()">–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å</button>
      </div>
    </div>
  </section>

  <!-- Lead Form -->
  <section id="lead-form" style="background: white;">
    <div class="container">
      <h2 class="text-center mb-sm">–ó–∞–±—Ä–æ–Ω–∏—Ä—É–π—Ç–µ –≤—ã–ø—É—Å–∫–Ω–æ–π –º–µ—á—Ç—ã</h2>
      <p class="text-center mb-md">–û—Å—Ç–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É, –∏ –º—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 15 –º–∏–Ω—É—Ç</p>
      
      <form class="lead-form" id="contactForm" novalidate>
        <div class="form-group">
          <label for="name" class="form-label">–í–∞—à–µ –∏–º—è *</label>
          <input 
            type="text" 
            id="name" 
            name="name" 
            class="form-input" 
            placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è"
            required
            minlength="2"
            autocomplete="name"
            aria-required="true"
            aria-describedby="name-error"
          >
          <div class="form-error" id="name-error" role="alert"></div>
        </div>

        <div class="form-group">
          <label for="phone" class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
          <input 
            type="tel" 
            id="phone" 
            name="phone" 
            class="form-input" 
            placeholder="+7 (___) ___-__-__"
            required
            autocomplete="tel"
            inputmode="tel"
            aria-required="true"
            aria-describedby="phone-error"
          >
          <div class="form-error" id="phone-error" role="alert"></div>
        </div>

        <div class="form-group">
          <label for="program" class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É *</label>
          <select 
            id="program" 
            name="program" 
            class="form-select" 
            required
            aria-required="true"
            aria-describedby="program-error"
          >
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É</option>
            <option value="heroes">–í—ã–∑–æ–≤ –≥–µ—Ä–æ–µ–≤ (—Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π —Ç–∏–º–±–∏–ª–¥–∏–Ω–≥)</option>
            <option value="ancients">–¢–∞–π–Ω—ã –î—Ä–µ–≤–Ω–∏—Ö (–∫–≤–µ—Å—Ç-–∏–≥—Ä–∞)</option>
            <option value="not_sure">–ü–æ–∫–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏—Å—å</option>
          </select>
          <div class="form-error" id="program-error" role="alert"></div>
        </div>

        <div class="form-group">
          <label for="children-count" class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ—Ç–µ–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
          <input 
            type="number" 
            id="children-count" 
            name="childrenCount" 
            class="form-input" 
            placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 25"
            min="10"
            max="50"
            inputmode="numeric"
          >
        </div>

        <div class="form-group full-width">
          <label for="comment" class="form-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
          <textarea 
            id="comment" 
            name="comment" 
            class="form-textarea" 
            rows="3"
            placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–∞—à–∏—Ö –ø–æ–∂–µ–ª–∞–Ω–∏—è—Ö –∏–ª–∏ –∑–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å"
          ></textarea>
        </div>

        <div class="form-group full-width">
          <button type="submit" class="btn btn-primary" style="width: 100%;">
            –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É
          </button>
        </div>

        <p style="font-size: 12px; color: #999; margin-top: 8px; text-align: center; margin-bottom: 0;">
          –ù–∞–∂–∏–º–∞—è –∫–Ω–æ–ø–∫—É, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å <a href="#" style="text-decoration: underline;">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
        </p>
      </form>
    </div>
  </section>



  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <!-- –û –∫–æ–º–ø–∞–Ω–∏–∏ -->
      <div class="footer-about">
        <h3>–û –∫–æ–º–ø–∞–Ω–∏–∏</h3>
        <p>–û—Ä–≥–∞–Ω–∏–∑—É–µ–º –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–µ –≤—ã–ø—É—Å–∫–Ω—ã–µ –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–π —à–∫–æ–ª—ã —Å 2016 –≥–æ–¥–∞. –ë–æ–ª–µ–µ 500 –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π. –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, —è—Ä–∫–∏–µ —ç–º–æ—Ü–∏–∏ –∏ –¥–æ–≤–æ–ª—å–Ω—ã–µ –¥–µ—Ç–∏ ‚Äî —ç—Ç–æ –Ω–∞—à–∞ —Ä–∞–±–æ—Ç–∞!</p>
      </div>
      
      <!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –î–æ–∫—É–º–µ–Ω—Ç—ã -->
      <div class="footer-content">
        <div class="footer-contacts">
          <h4>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
          <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> <a href="tel:+79991234567" onclick="trackPhoneClick()">+7 (999) 123-45-67</a></p>
          <p><strong>Email:</strong> <a href="mailto:info@graduation.ru?subject=–í–æ–ø—Ä–æ—Å%20–æ%20–≤—ã–ø—É—Å–∫–Ω–æ–º%20–¥–ª—è%204%20–∫–ª–∞—Å—Å–∞">info@graduation.ru</a></p>
          <p><strong>–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:</strong> –ü–Ω-–í—Å 9:00-21:00</p>
        </div>
        
        <div class="footer-documents">
          <h4>–î–æ–∫—É–º–µ–Ω—Ç—ã</h4>
          <p><a href="#">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a></p>
          <p><a href="#">–î–æ–≥–æ–≤–æ—Ä –æ—Ñ–µ—Ä—Ç—ã</a></p>
          <p><a href="#">–†–µ–∫–≤–∏–∑–∏—Ç—ã –∫–æ–º–ø–∞–Ω–∏–∏</a></p>
        </div>
      </div>
      
      <!-- –ö–æ–ø–∏—Ä–∞–π—Ç -->
      <div class="footer-copyright">
        <p>&copy; 2024 –í—ã–ø—É—Å–∫–Ω–æ–π –Ω–∞ –ø—Ä–∏—Ä–æ–¥–µ. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        <p class="footer-company-info">–ò–ü –ò–≤–∞–Ω–æ–≤ –ò.–ò. | –ò–ù–ù 123456789012 | –û–ì–†–ù–ò–ü 123456789012345</p>
      </div>
    </div>
  </footer>

  <!-- Floating CTA Button -->
  <div class="floating-cta" id="floatingCta">
    <button class="floating-cta-button" onclick="scrollToForm()" aria-label="–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø—É—Å–∫–Ω–æ–π">
      <span class="css-calendar-white floating-cta-icon"></span>
      <span>–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø—É—Å–∫–Ω–æ–π</span>
    </button>
  </div>

  <!-- Floating Contact Widget -->
  <div class="floating-contact-widget" id="floatingContact">
    <button class="floating-contact-toggle" id="floatingContactToggle" onclick="toggleFloatingContact()" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é –±—ã—Å—Ç—Ä–æ–π —Å–≤—è–∑–∏">
      <span class="css-comments-white toggle-icon"></span>
      <span class="toggle-text">–°–≤—è–∑–∞—Ç—å—Å—è</span>
    </button>
    
    <div class="floating-contact-menu" id="floatingContactMenu">
      <button class="floating-contact-item floating-contact-form" 
              onclick="scrollToForm(); toggleFloatingContact();"
              aria-label="–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É">
        <span class="css-edit floating-contact-icon"></span>
        <span class="floating-contact-label">–ó–∞—è–≤–∫–∞</span>
      </button>
      
      <a href="https://t.me/+79991234567?text=–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!%20–•–æ—á—É%20—É–∑–Ω–∞—Ç—å%20–æ%20–≤—ã–ø—É—Å–∫–Ω–æ–º%20–¥–ª—è%204%20–∫–ª–∞—Å—Å–∞.%20–ò–Ω—Ç–µ—Ä–µ—Å—É—é—Ç%20–ø—Ä–æ–≥—Ä–∞–º–º—ã%20–Ω–∞%20–ø—Ä–∏—Ä–æ–¥–µ." 
         class="floating-contact-item floating-contact-telegram" 
         target="_blank" 
         rel="noopener noreferrer"
         onclick="trackMessengerClick('telegram')"
         aria-label="–ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram">
        <span class="css-telegram floating-contact-icon"></span>
        <span class="floating-contact-label">Telegram</span>
      </a>
      
      <a href="https://wa.me/79991234567?text=–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!%20–•–æ—á—É%20—É–∑–Ω–∞—Ç—å%20–æ%20–≤—ã–ø—É—Å–∫–Ω–æ–º%20–¥–ª—è%204%20–∫–ª–∞—Å—Å–∞.%20–ò–Ω—Ç–µ—Ä–µ—Å—É—é—Ç%20–ø—Ä–æ–≥—Ä–∞–º–º—ã%20–Ω–∞%20–ø—Ä–∏—Ä–æ–¥–µ." 
         class="floating-contact-item floating-contact-whatsapp" 
         target="_blank" 
         rel="noopener noreferrer"
         onclick="trackMessengerClick('whatsapp')"
         aria-label="–ù–∞–ø–∏—Å–∞—Ç—å –≤ WhatsApp">
        <span class="css-whatsapp floating-contact-icon"></span>
        <span class="floating-contact-label">WhatsApp</span>
      </a>
      
      <a href="tel:+79991234567" 
         class="floating-contact-item floating-contact-phone" 
         onclick="trackPhoneClick()"
         aria-label="–ü–æ–∑–≤–æ–Ω–∏—Ç—å">
        <span class="css-phone floating-contact-icon"></span>
        <span class="floating-contact-label">–ü–æ–∑–≤–æ–Ω–∏—Ç—å</span>
      </a>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Smooth scroll to sections
    function scrollToForm() {
      document.getElementById('lead-form').scrollIntoView({ behavior: 'smooth' });
    }

    function scrollToPrograms() {
      document.getElementById('programs').scrollIntoView({ behavior: 'smooth' });
    }

    // Select program and scroll to form
    function selectProgram(programId) {
      const programSelect = document.getElementById('program');
      programSelect.value = programId;
      scrollToForm();
    }

    // FAQ functionality
    let faqData = [];
    let currentFaqFilter = 'all';

    // Load FAQ data from JSON
    async function loadFaq() {
      try {
        const response = await fetch('data/faq.json');
        faqData = await response.json();
        renderFaq();
      } catch (error) {
        console.error('Error loading FAQ:', error);
        // Fallback to empty state
        const faqList = document.getElementById('faqList');
        if (faqList) {
          faqList.innerHTML = '<p style="text-align: center; color: #999;">–í–æ–ø—Ä–æ—Å—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã</p>';
        }
      }
    }

    // Render FAQ items
    function renderFaq() {
      const faqList = document.getElementById('faqList');
      if (!faqList) return;

      // Filter FAQ items based on current filter
      const filteredFaq = currentFaqFilter === 'all' 
        ? faqData 
        : faqData.filter(item => item.category === currentFaqFilter);

      // Render FAQ items
      faqList.innerHTML = filteredFaq.map(item => `
        <div class="faq-item" data-category="${item.category}">
          <button class="faq-question" onclick="toggleFaq(this)" aria-expanded="false">
            <span>${item.question}</span>
            <span aria-hidden="true">‚ñº</span>
          </button>
          <div class="faq-answer">
            <p>${item.answer}</p>
          </div>
        </div>
      `).join('');

      // Track FAQ opens in analytics
      document.querySelectorAll('.faq-question').forEach(button => {
        button.addEventListener('click', function() {
          const question = this.querySelector('span').textContent;
          if (window.trackEvent) {
            trackEvent('faq_open', { question: question });
          }
        });
      });
    }

    // Filter FAQ by category
    function filterFaq(category) {
      currentFaqFilter = category;
      
      // Update active button
      document.querySelectorAll('.faq-filter-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('data-category') === category) {
          btn.classList.add('active');
        }
      });
      
      renderFaq();
    }

    // FAQ accordion toggle
    function toggleFaq(button) {
      const faqItem = button.parentElement;
      const isActive = faqItem.classList.contains('active');
      
      // Update aria-expanded
      button.setAttribute('aria-expanded', !isActive);
      
      // Close all FAQ items (optional: remove this to allow multiple open)
      document.querySelectorAll('.faq-item').forEach(item => {
        item.classList.remove('active');
        const btn = item.querySelector('.faq-question');
        if (btn) btn.setAttribute('aria-expanded', 'false');
      });
      
      // Open clicked item if it wasn't active
      if (!isActive) {
        faqItem.classList.add('active');
        button.setAttribute('aria-expanded', 'true');
      }
    }

    // Initialize FAQ on page load
    document.addEventListener('DOMContentLoaded', function() {
      loadFaq();
    });

    // Smart header and floating elements on scroll
    let lastScrollY = 0;
    let ticking = false;
    let headerTimeout;

    function updateFloatingElements() {
      const header = document.querySelector('.header');
      const floatingContact = document.getElementById('floatingContact');
      const floatingCta = document.getElementById('floatingCta');
      const heroSection = document.querySelector('.hero');
      const programsSection = document.getElementById('programs');
      const leadFormSection = document.getElementById('lead-form');
      
      const scrollY = window.scrollY;
      const windowHeight = window.innerHeight;
      const scrollDirection = scrollY > lastScrollY ? 'down' : 'up';
      const scrollDelta = Math.abs(scrollY - lastScrollY);
      
      // Smart header behavior
      if (header) {
        // Add scrolled class after 50px
        if (scrollY > 50) {
          header.classList.add('scrolled');
        } else {
          header.classList.remove('scrolled');
        }
        
        // Hide header when scrolling down fast, show when scrolling up
        if (scrollY > 200) { // Only after scrolling past hero
          if (scrollDirection === 'down' && scrollDelta > 5) {
            header.classList.add('hidden');
            // Clear any existing timeout
            clearTimeout(headerTimeout);
          } else if (scrollDirection === 'up' && scrollDelta > 5) {
            header.classList.remove('hidden');
            // Auto-hide after 3 seconds of no scrolling
            clearTimeout(headerTimeout);
            headerTimeout = setTimeout(() => {
              if (window.scrollY > 200) {
                header.classList.add('hidden');
              }
            }, 3000);
          }
        } else {
          header.classList.remove('hidden');
          clearTimeout(headerTimeout);
        }
        
        // Compact header in middle sections
        if (scrollY > windowHeight) {
          header.classList.add('compact');
        } else {
          header.classList.remove('compact');
        }
        

      }
      
      // Check if user is viewing programs section
      let inProgramsSection = false;
      if (programsSection) {
        const programsTop = programsSection.offsetTop;
        const programsBottom = programsTop + programsSection.offsetHeight;
        inProgramsSection = scrollY + windowHeight > programsTop && scrollY < programsBottom;
      }
      
      // Check if user is viewing lead form section or below
      let inLeadFormOrBelow = false;
      if (leadFormSection) {
        const leadFormTop = leadFormSection.offsetTop;
        inLeadFormOrBelow = scrollY + windowHeight > leadFormTop;
      }
      
      // Show/hide floating elements
      if (heroSection) {
        const heroBottom = heroSection.offsetTop + heroSection.offsetHeight;
        const shouldShowFloating = scrollY > heroBottom;
        
        console.log('Floating elements check:', {
          scrollY,
          heroBottom,
          shouldShowFloating,
          inProgramsSection,
          inLeadFormOrBelow,
          floatingContactExists: !!floatingContact,
          floatingCtaExists: !!floatingCta
        });
        
        // Floating contact widget - always show when past hero
        if (floatingContact) {
          if (shouldShowFloating) {
            floatingContact.classList.add('visible');
            console.log('Contact widget: visible');
          } else {
            floatingContact.classList.remove('visible');
            console.log('Contact widget: hidden');
          }
        }
        
        // Floating CTA button - hide in programs section and lead form area
        if (floatingCta) {
          if (shouldShowFloating && !inProgramsSection && !inLeadFormOrBelow) {
            floatingCta.classList.add('visible');
            console.log('CTA button: visible');
          } else {
            floatingCta.classList.remove('visible');
            console.log('CTA button: hidden');
          }
        }
      }
      
      lastScrollY = scrollY;
      ticking = false;
    }

    // Throttle scroll events for performance
    window.addEventListener('scroll', function() {
      if (!ticking) {
        window.requestAnimationFrame(function() {
          updateFloatingElements();
        });
        ticking = true;
      }
    });

    // Align hero CTA buttons to same width
    function alignHeroCTAButtons() {
      const heroButtons = document.querySelectorAll('.hero-cta .btn');
      if (heroButtons.length < 2) return;
      
      // Reset any previous width settings
      heroButtons.forEach(btn => {
        btn.style.width = 'auto';
        btn.style.minWidth = 'auto';
      });
      
      // Wait for layout to settle
      requestAnimationFrame(() => {
        // Find the widest button
        let maxWidth = 0;
        heroButtons.forEach(btn => {
          const width = btn.offsetWidth;
          if (width > maxWidth) {
            maxWidth = width;
          }
        });
        
        // Apply the max width to all buttons
        if (maxWidth > 0) {
          heroButtons.forEach(btn => {
            btn.style.minWidth = maxWidth + 'px';
          });
          console.log('Hero CTA buttons aligned to width:', maxWidth + 'px');
        }
      });
    }

    // Check if Font Awesome is loaded
    function checkFontAwesome() {
      const testElement = document.createElement('i');
      testElement.className = 'fas fa-phone';
      testElement.style.position = 'absolute';
      testElement.style.left = '-9999px';
      document.body.appendChild(testElement);
      
      const computedStyle = window.getComputedStyle(testElement, ':before');
      const content = computedStyle.getPropertyValue('content');
      
      document.body.removeChild(testElement);
      
      // If Font Awesome is loaded, content should not be 'none' or empty
      if (content && content !== 'none' && content !== '""') {
        console.log('Font Awesome loaded successfully');
        document.body.classList.add('fa-loaded');
      } else {
        console.log('Font Awesome not loaded, using fallback');
        document.body.classList.add('fa-fallback');
      }
    }

    // Initial check on page load
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOM loaded, initializing floating elements...');
      updateFloatingElements();
      
      // Check Font Awesome loading
      setTimeout(checkFontAwesome, 100);
      
      // Align hero buttons after a short delay to ensure fonts are loaded
      setTimeout(alignHeroCTAButtons, 100);
    });

    // Toggle floating contact menu
    function toggleFloatingContact() {
      const menu = document.getElementById('floatingContactMenu');
      const toggle = document.getElementById('floatingContactToggle');
      
      if (menu && toggle) {
        const isOpen = menu.classList.contains('open');
        
        if (isOpen) {
          menu.classList.remove('open');
          toggle.classList.remove('active');
          toggle.setAttribute('aria-expanded', 'false');
        } else {
          menu.classList.add('open');
          toggle.classList.add('active');
          toggle.setAttribute('aria-expanded', 'true');
        }
      }
    }

    // Show header on mouse move near top of screen
    document.addEventListener('mousemove', function(event) {
      const header = document.querySelector('.header');
      if (header && window.scrollY > 200) {
        if (event.clientY < 100) { // Mouse near top 100px
          header.classList.remove('hidden');
          clearTimeout(headerTimeout);
          // Auto-hide after 2 seconds
          headerTimeout = setTimeout(() => {
            if (window.scrollY > 200 && event.clientY > 100) {
              header.classList.add('hidden');
            }
          }, 2000);
        }
      }
    });

    // Close floating contact menu when clicking outside
    document.addEventListener('click', function(event) {
      const widget = document.getElementById('floatingContact');
      const toggle = document.getElementById('floatingContactToggle');
      const menu = document.getElementById('floatingContactMenu');
      
      if (widget && toggle && menu) {
        const isClickInside = widget.contains(event.target);
        
        if (!isClickInside && menu.classList.contains('open')) {
          menu.classList.remove('open');
          toggle.classList.remove('active');
          toggle.setAttribute('aria-expanded', 'false');
        }
      }
    });

    // Track phone clicks
    function trackPhoneClick() {
      if (window.trackEvent) {
        trackEvent('phone_click', {
          phone: '+79991234567',
          location: window.location.pathname
        });
      }
    }

    // Track messenger clicks
    function trackMessengerClick(messenger) {
      if (window.trackEvent) {
        trackEvent('messenger_click', {
          messenger: messenger,
          location: window.location.pathname
        });
      }
    }

    // Form validation is now handled by scripts/form-validation.js

    // Testimonials Carousel
    let testimonials = [];
    let currentPage = 0;
    let testimonialsPerPage = 3;

    // Update testimonials per page based on screen size
    function updateTestimonialsPerPage() {
      const width = window.innerWidth;
      if (width < 768) {
        testimonialsPerPage = 1;
      } else if (width < 1024) {
        testimonialsPerPage = 2;
      } else {
        testimonialsPerPage = 3;
      }
    }

    // Format date to Russian format
    function formatDate(dateString) {
      const date = new Date(dateString);
      const options = { day: 'numeric', month: 'long', year: 'numeric' };
      return date.toLocaleDateString('ru-RU', options);
    }

    // Get initials from name
    function getInitials(name) {
      return name.split(' ').map(n => n[0]).join('');
    }

    // Render testimonial card
    function renderTestimonial(testimonial) {
      const stars = '‚≠ê'.repeat(testimonial.rating);
      const initials = getInitials(testimonial.authorName);
      const photoHtml = testimonial.authorPhoto 
        ? `<img src="${testimonial.authorPhoto}" alt="${testimonial.authorName}" class="testimonial-photo">`
        : `<div class="testimonial-photo">${initials}</div>`;
      
      return `
        <article class="testimonial-card">
          <div class="testimonial-header">
            ${photoHtml}
            <div class="testimonial-author-info">
              <h4>${testimonial.authorName}</h4>
              <p class="testimonial-school">${testimonial.schoolInfo}</p>
              <div class="testimonial-rating">${stars}</div>
            </div>
          </div>
          <p class="testimonial-text">${testimonial.text}</p>
          <p class="testimonial-date">${formatDate(testimonial.date)}</p>
        </article>
      `;
    }

    // Render testimonials page
    function renderTestimonials() {
      const carousel = document.getElementById('testimonialsCarousel');
      if (!carousel) return;

      const start = currentPage * testimonialsPerPage;
      const end = start + testimonialsPerPage;
      const pageTestimonials = testimonials.slice(start, end);

      carousel.innerHTML = pageTestimonials.map(renderTestimonial).join('');
      
      // Update navigation buttons
      updateNavigationButtons();
      updateDots();
    }

    // Update navigation buttons state
    function updateNavigationButtons() {
      const prevBtn = document.querySelector('.carousel-nav-prev');
      const nextBtn = document.querySelector('.carousel-nav-next');
      
      if (prevBtn) {
        prevBtn.disabled = currentPage === 0;
      }
      
      if (nextBtn) {
        const totalPages = Math.ceil(testimonials.length / testimonialsPerPage);
        nextBtn.disabled = currentPage >= totalPages - 1;
      }
    }

    // Navigate testimonials
    function navigateTestimonials(direction) {
      const totalPages = Math.ceil(testimonials.length / testimonialsPerPage);
      currentPage += direction;
      
      if (currentPage < 0) currentPage = 0;
      if (currentPage >= totalPages) currentPage = totalPages - 1;
      
      renderTestimonials();
    }

    // Render dots
    function updateDots() {
      const dotsContainer = document.getElementById('testimonialsDots');
      if (!dotsContainer) return;

      const totalPages = Math.ceil(testimonials.length / testimonialsPerPage);
      
      dotsContainer.innerHTML = Array.from({ length: totalPages }, (_, i) => 
        `<button class="carousel-dot ${i === currentPage ? 'active' : ''}" 
                onclick="goToPage(${i})" 
                aria-label="–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ${i + 1}"></button>`
      ).join('');
    }

    // Go to specific page
    function goToPage(page) {
      currentPage = page;
      renderTestimonials();
    }

    // Load testimonials from JSON
    async function loadTestimonials() {
      try {
        const response = await fetch('data/testimonials.json');
        testimonials = await response.json();
        updateTestimonialsPerPage();
        renderTestimonials();
      } catch (error) {
        console.error('Error loading testimonials:', error);
        // Fallback to empty state or show error message
        const carousel = document.getElementById('testimonialsCarousel');
        if (carousel) {
          carousel.innerHTML = '<p style="text-align: center; color: #999;">–û—Ç–∑—ã–≤—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã</p>';
        }
      }
    }

    // Handle window resize
    let resizeTimer;
    window.addEventListener('resize', function() {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(function() {
        const oldPerPage = testimonialsPerPage;
        updateTestimonialsPerPage();
        
        // Recalculate current page if items per page changed
        if (oldPerPage !== testimonialsPerPage) {
          currentPage = 0;
          renderTestimonials();
        }
        
        // Re-align hero CTA buttons on resize
        alignHeroCTAButtons();
      }, 250);
    });

    // Initialize testimonials on page load
    document.addEventListener('DOMContentLoaded', loadTestimonials);

    // Gallery functionality
    let galleryImages = [];
    let currentFilter = 'all';
    let currentLightboxIndex = 0;
    let filteredImages = [];

    // Sample gallery data (in production, load from JSON or API)
    const sampleGalleryData = [
      {
        id: 1,
        src: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%23FF6B35" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3EüèÉ‚Äç‚ôÇÔ∏è%3C/text%3E%3C/svg%3E',
        thumbnail: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%23FF6B35" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3EüèÉ‚Äç‚ôÇÔ∏è%3C/text%3E%3C/svg%3E',
        alt: '–í—ã–∑–æ–≤ –≥–µ—Ä–æ–µ–≤ - —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è',
        program: 'heroes',
        order: 1
      },
      {
        id: 2,
        src: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%234ECDC4" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3Eüóø%3C/text%3E%3C/svg%3E',
        thumbnail: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%234ECDC4" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3Eüóø%3C/text%3E%3C/svg%3E',
        alt: '–¢–∞–π–Ω—ã –î—Ä–µ–≤–Ω–∏—Ö - –∫–≤–µ—Å—Ç',
        program: 'ancients',
        order: 2
      },
      {
        id: 3,
        src: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%23FFE66D" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3EüéØ%3C/text%3E%3C/svg%3E',
        thumbnail: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%23FFE66D" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3EüéØ%3C/text%3E%3C/svg%3E',
        alt: '–í—ã–∑–æ–≤ –≥–µ—Ä–æ–µ–≤ - –∫–æ–º–∞–Ω–¥–Ω—ã–µ –∏–≥—Ä—ã',
        program: 'heroes',
        order: 3
      },
      {
        id: 4,
        src: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%23F7931E" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3EüèÜ%3C/text%3E%3C/svg%3E',
        thumbnail: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%23F7931E" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3EüèÜ%3C/text%3E%3C/svg%3E',
        alt: '–ù–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π',
        program: 'both',
        order: 4
      },
      {
        id: 5,
        src: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%2344A08D" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3Eüîç%3C/text%3E%3C/svg%3E',
        thumbnail: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%2344A08D" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3Eüîç%3C/text%3E%3C/svg%3E',
        alt: '–¢–∞–π–Ω—ã –î—Ä–µ–≤–Ω–∏—Ö - –ø–æ–∏—Å–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤',
        program: 'ancients',
        order: 5
      },
      {
        id: 6,
        src: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%23FF6B35" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3Eüßó%3C/text%3E%3C/svg%3E',
        thumbnail: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%23FF6B35" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3Eüßó%3C/text%3E%3C/svg%3E',
        alt: '–í—ã–∑–æ–≤ –≥–µ—Ä–æ–µ–≤ - –≤–µ—Ä–µ–≤–æ—á–Ω—ã–π –ø–∞—Ä–∫',
        program: 'heroes',
        order: 6
      },
      {
        id: 7,
        src: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%234ECDC4" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3Eüé≠%3C/text%3E%3C/svg%3E',
        thumbnail: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%234ECDC4" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3Eüé≠%3C/text%3E%3C/svg%3E',
        alt: '–¢–∞–π–Ω—ã –î—Ä–µ–≤–Ω–∏—Ö - —Ç–µ–∞—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —à–æ—É',
        program: 'ancients',
        order: 7
      },
      {
        id: 8,
        src: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%23FFE66D" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3Eüéâ%3C/text%3E%3C/svg%3E',
        thumbnail: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%23FFE66D" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3Eüéâ%3C/text%3E%3C/svg%3E',
        alt: '–ü—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ',
        program: 'both',
        order: 8
      },
      {
        id: 9,
        src: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%23F7931E" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3Eü§ù%3C/text%3E%3C/svg%3E',
        thumbnail: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%23F7931E" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3Eü§ù%3C/text%3E%3C/svg%3E',
        alt: '–í—ã–∑–æ–≤ –≥–µ—Ä–æ–µ–≤ - –∫–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞',
        program: 'heroes',
        order: 9
      },
      {
        id: 10,
        src: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%2344A08D" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3Eüìú%3C/text%3E%3C/svg%3E',
        thumbnail: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%2344A08D" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3Eüìú%3C/text%3E%3C/svg%3E',
        alt: '–¢–∞–π–Ω—ã –î—Ä–µ–≤–Ω–∏—Ö - –¥—Ä–µ–≤–Ω–∏–µ —Å–≤–∏—Ç–∫–∏',
        program: 'ancients',
        order: 10
      },
      {
        id: 11,
        src: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%23FF6B35" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3E‚ö°%3C/text%3E%3C/svg%3E',
        thumbnail: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%23FF6B35" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3E‚ö°%3C/text%3E%3C/svg%3E',
        alt: '–í—ã–∑–æ–≤ –≥–µ—Ä–æ–µ–≤ - —ç–Ω–µ—Ä–≥–∏—è –∏ –¥—Ä–∞–π–≤',
        program: 'heroes',
        order: 11
      },
      {
        id: 12,
        src: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%234ECDC4" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3Eüß©%3C/text%3E%3C/svg%3E',
        thumbnail: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"%3E%3Crect fill="%234ECDC4" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="white" font-family="Arial"%3Eüß©%3C/text%3E%3C/svg%3E',
        alt: '–¢–∞–π–Ω—ã –î—Ä–µ–≤–Ω–∏—Ö - –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏',
        program: 'ancients',
        order: 12
      }
    ];

    // Load gallery from JSON (optional - falls back to sample data)
    async function loadGallery() {
      try {
        const response = await fetch('data/gallery.json');
        galleryImages = await response.json();
      } catch (error) {
        console.log('Using sample gallery data');
        galleryImages = sampleGalleryData;
      }
      renderGallery();
    }

    // Initialize gallery
    function initGallery() {
      loadGallery();
    }

    // Render gallery items
    function renderGallery() {
      const galleryGrid = document.getElementById('galleryGrid');
      if (!galleryGrid) return;

      // Filter images based on current filter
      filteredImages = currentFilter === 'all' 
        ? galleryImages 
        : galleryImages.filter(img => img.program === currentFilter || img.program === 'both');

      // Render gallery items with lazy loading
      galleryGrid.innerHTML = filteredImages.map((image, index) => `
        <div class="gallery-item" onclick="openLightbox(${index})" data-program="${image.program}">
          <img 
            src="${image.thumbnail}" 
            data-src="${image.src}"
            alt="${image.alt}" 
            loading="lazy"
          >
        </div>
      `).join('');

      // Setup intersection observer for lazy loading
      setupLazyLoading();
    }

    // Setup lazy loading with Intersection Observer
    function setupLazyLoading() {
      const images = document.querySelectorAll('.gallery-item img[loading="lazy"]');
      
      if ('IntersectionObserver' in window) {
        const imageObserver = new IntersectionObserver((entries, observer) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const img = entry.target;
              const fullSrc = img.getAttribute('data-src');
              
              if (fullSrc && fullSrc !== img.src) {
                img.src = fullSrc;
              }
              
              observer.unobserve(img);
            }
          });
        }, {
          rootMargin: '50px'
        });

        images.forEach(img => imageObserver.observe(img));
      } else {
        // Fallback for browsers without IntersectionObserver
        images.forEach(img => {
          const fullSrc = img.getAttribute('data-src');
          if (fullSrc) {
            img.src = fullSrc;
          }
        });
      }
    }

    // Filter gallery by program
    function filterGallery(filter) {
      currentFilter = filter;
      
      // Update active button
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('data-filter') === filter) {
          btn.classList.add('active');
        }
      });
      
      renderGallery();
    }

    // Open lightbox
    function openLightbox(index) {
      currentLightboxIndex = index;
      const lightbox = document.getElementById('lightbox');
      const lightboxImage = document.getElementById('lightboxImage');
      const lightboxCaption = document.getElementById('lightboxCaption');
      
      if (lightbox && lightboxImage && filteredImages[index]) {
        const image = filteredImages[index];
        lightboxImage.src = image.src;
        lightboxImage.alt = image.alt;
        lightboxCaption.textContent = image.alt;
        lightbox.classList.add('active');
        
        // Prevent body scroll when lightbox is open
        document.body.style.overflow = 'hidden';
      }
    }

    // Close lightbox
    function closeLightbox(event) {
      // Only close if clicking on the overlay or close button
      if (event.target.id === 'lightbox' || event.target.classList.contains('lightbox-close')) {
        const lightbox = document.getElementById('lightbox');
        if (lightbox) {
          lightbox.classList.remove('active');
          document.body.style.overflow = '';
        }
      }
    }

    // Navigate lightbox
    function navigateLightbox(direction) {
      currentLightboxIndex += direction;
      
      // Loop around
      if (currentLightboxIndex < 0) {
        currentLightboxIndex = filteredImages.length - 1;
      } else if (currentLightboxIndex >= filteredImages.length) {
        currentLightboxIndex = 0;
      }
      
      const lightboxImage = document.getElementById('lightboxImage');
      const lightboxCaption = document.getElementById('lightboxCaption');
      
      if (lightboxImage && filteredImages[currentLightboxIndex]) {
        const image = filteredImages[currentLightboxIndex];
        lightboxImage.src = image.src;
        lightboxImage.alt = image.alt;
        lightboxCaption.textContent = image.alt;
      }
    }

    // Keyboard navigation for lightbox
    document.addEventListener('keydown', function(e) {
      const lightbox = document.getElementById('lightbox');
      if (lightbox && lightbox.classList.contains('active')) {
        if (e.key === 'Escape') {
          lightbox.classList.remove('active');
          document.body.style.overflow = '';
        } else if (e.key === 'ArrowLeft') {
          navigateLightbox(-1);
        } else if (e.key === 'ArrowRight') {
          navigateLightbox(1);
        }
      }
    });

    // Initialize gallery on page load
    document.addEventListener('DOMContentLoaded', function() {
      initGallery();
    });
  </script>
  
  <!-- GAS Frontend Adapter - Load first! -->
  <script src="frontend-adapter.js"></script>
  
  <!-- Settings Module - Load first to apply hero background -->
  <script src="scripts/settings.js" defer></script>
  
  <!-- Blocks Manager - Load early to control section visibility -->
  <script src="scripts/blocks-manager.js" defer></script>
  
  <!-- Programs Module - Load before other modules that depend on it -->
  <script src="scripts/programs.js" defer></script>
  
  <!-- Yandex Metrika Analytics Module - Async loading -->
  <script src="scripts/analytics.js" defer></script>
  
  <!-- Bitrix24 Integration Module - Async loading -->
  <script src="scripts/bitrix24.js" defer></script>
  
  <!-- Form Validation Module - Async loading -->
  <script src="scripts/form-validation.js" defer></script>
</body>
</html>
</div>